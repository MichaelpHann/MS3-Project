{% extends "base.html" %}
{% block content %}

<div class="row">
    <div class="col s12 m8 offset-m2">
        <div class="row card-panel edit-post-card grey lighten-5">
            <h4 class="center-align edit-post-header">Edit Post</h4>
            <hr>
            <form class="col s12 m10 offset-m1" method="POST" action="{{ url_for('edit_post', post_id=post._id) }}">
                <!-- Category -->
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">folder</i>
                        <select id="category_name" name="category_name" class="edit-post-category validate" required>
                            {% for category in categories %}
                                {% if category.category_name == post.category_name %}
                                    <option value="{{ category.category_name }}" selected>{{ category.category_name }}</option>
                                {% else %}
                                    <option value="{{ category.category_name }}">{{ category.category_name }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="category_name"></label>
                    </div>
                </div>
                <!-- Post title -->
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">text_fields</i>
                        <input id="post_title" name="post_title" minlength="5" maxlength="75" value="{{ post.post_title }}" type="text" class="edit-post-title validate" required>
                    </div>
                </div>
                <!-- Content -->
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons  prefix">notes</i>
                        <textarea id="post_content" name="post_content" class="materialize-textarea validate edit-post-content" required>
                            {{- post.post_content -}}
                        </textarea>
                        <label for="post_content"></label>
                    </div>
                </div>
                <!-- Buttons -->
                <div class="row">
                    <div class="col s12 center-align">
                        <!-- cancel button -->
                        <a href="{{ url_for('get_posts') }}" class="btncancel-btn transparent">
                            <strong>Cancel</strong>
                            <i class="material-icons right"><strong>chevron_right</strong></i>
                        </a>
                        <!-- publish post button -->
                        <button type="submit" class="btn submit-btn waves-effect waves-light">
                            <strong>Publish</strong>
                            <i class="material-icons right"><strong>chevron_right</strong></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}